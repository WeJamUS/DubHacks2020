<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="author" content="Albert Lam">
    <meta name="description" content="Project">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
    <title>Home</title>
    <script type="displayCalendar" src="js/table.js"></script>
</head>

<body>
    <div class="menu">

        <div class="flyoutMenu">
            <img id="navIcon" src="img/navicon.svg">
            <p><a href="home.html">Home</a></p>
            <p><a href="group.html">Pals</a></p>
            <p><a href="#">Add Group</a></p>
        </div>
    </div>
    <div class="freeSchedule">
        <h1>When are you free?</h1>
        <h2>Your Schedule</h2>
    </div>
    <div class="calendar">
        <h2 id="month"></h2>
        <div id="dates">
            <div>
                <p>Su</p>
                <p>M</p>
                <p>Tu</p>
                <p>W</p>
                <p>Th</p>
                <p>F</p>
                <p>S</p>
            </div>
            <div id="week1"></div>
            <div id="week2"></div>
            <div id="week3"></div>
            <div id="week4"></div>
            <div id="week5"></div>
            <div id="week6"></div>
        </div>

    </div>
    <div class="import">
        <h3>Import your Calendar</h3>

        <div class="threeIcons">
            <a href="google.com">
                <img id="googleIcon" src="img/outlookicon.webp">
            </a>
            <a href="google.com">
                <img id="appleIcon" src="img/googleicon.jpg">
            </a>
            <a href="google.com">
                <img id="outlookIcon" src="img/applecalendaricon.png">
            </a>
        </div>
    </div>


    <script>

        /**
   * Displays a calendar of the current month
   */   
        displayCalendar();
        function displayCalendar() {
            let date = new Date();
            let month = date.getMonth();
            let year = date.getFullYear();
            //id("month").textContent = MONTHS[month];
            let totalDays = daysInMonth(month, year);
            let firstDay = dayOfDate(month, year, 1);
            let lastDay = dayOfDate(month, year, totalDays);
            //fillDates(month, year, totalDays, firstDay, 6 - lastDay);
            document.getElementById("month").innerHTML = month;
        }

        /**
         * Fills in the calendar with dates
         * @param {integer} month Current month
         * @param {integer} year Current year
         * @param {integer} totalDays Number of days in current month
         * @param {integer} prevDays Number of days in previous month that will appear on the calendar
         * @param {interger} nextDays Number of days in next month that will appear on the calendar
         */
        function fillDates(month, year, totalDays, prevDays, nextDays) {
            let weekNumber = 1;
            let week = id("week1"); let prevMonth = month - 1;
            let prevYear = year;
            if (prevMonth < 0) {
                prevYear = year - 1;
                prevMonth = 11;
            }
            addFillerDays(daysInMonth(prevMonth, prevYear) - prevDays + 1, prevDays, week);
            for (let i = 1; i <= totalDays; i++) {
                if (week.children.length >= 7) {
                    weekNumber++;
                    week = id("week" + weekNumber);
                }
                let date = gen("div");
                date.classList.add("date");
                date.addEventListener("click", getSessions);
                let monthZero = "";
                let dayZero = "";
                if (month < 10) {
                    monthZero = "0";
                }
                if (i < 10) {
                    dayZero = "0";
                }
                date.id = year + "-" + monthZero + (month + 1) + "-" + dayZero + i;
                date.textContent = i;
                week.appendChild(date);
            }
            addFillerDays(1, nextDays, week);
        }

        /**
         * Adds in dates from other months to the displayed calendar
         * @param {integer} start Start date of the days from other months
         * @param {integer} days Number of days from other months
         * @param {object} week Week on the calendar that the days are added to
         */
        function addFillerDays(start, days, week) {
            for (let i = 0; i < days; i++) {
                let date = gen("div");
                date.classList.add("date");
                date.classList.add("prev-next");
                date.textContent = start + i;
                week.appendChild(date);
            }
        }

        /**
         * Returns the number of days in the given month
         * @param {integer} month Month
         * @param {integer} year Year
         * @returns {integer} Number of days in the given month
         */
        function daysInMonth(month, year) {
            return new Date(year, month + 1, 0).getDate();
        }

        /**
         * Returns the day of the week of the given date
         * @param {integer} month Month
         * @param {integer} year Year
         * @param {integer} date Date
         * @returns {integer} The day of the week as an integer
         */
        function dayOfDate(month, year, date) {
            return new Date(year, month, date).getDay();
        }
        window.onload = displayCalendar();
    </script>
</body>

</html>